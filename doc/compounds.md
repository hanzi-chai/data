# 概述

「字」数据库（或 `structure.yaml`）由一系列对象组成，每一个对象称为一个**字**。该命名的灵感来自于《说文解字》中对「字」的定义（由多个部件组成的汉字），与「文」数据库中的「文」（也即部件本身作为汉字）相对。在目前阶段，我们致力于将 GB2312 字集的所有字完成分解工作。

由于此前已经有很多关于嵌套数据的资料积累，我们的工作实际上仅是**将原有的资料加以规范化**并**决定哪些字需要加入「文」数据库**。

# 数据结构

「字」数据库采用易读易写的 `YAML` 存储，每个字为一个键值对。具体分为三种情况：

## 成字

当我们处理 GB2312 范围内的字时，如果分部结果仍在 GB2312 范围内，则可以直接列出结果：

```
字: [z, 宀, 子]
```

## 非成字

如果分部结果不在 GB2312 范围内，则将该部件用「实例字」+「部件在实例字中的位置符」表示：

```
得: [h, 彳, 得右]
```

然后我们再创建一条以 `得右` 为键的条目即可。

## 嵌套

有时虽然分部结果不在 GB2312 范围内，但这一部件不常用以至于没有必要新建条目，那么我们可以直接用嵌套的结构表示：

```
塄: [h, 土, [z, 罗上, 方]]
```

## 关于笔顺

有时分部的顺序和笔顺不完全一致，为照顾到更多人的拆分习惯，我们需要将这个数据加入进来：

```
国: [o, 囗, 玉, 2]
```

这即表示在「囗」写完前 2 笔之后写「玉」，然后再完成剩余部分。

# 注意事项

1. 出于系统内部的自洽性考虑，在键值对中建议只使用属于 GB2312 字集中的汉字（如果你不确定，可以用 `isGB.py` 进行判断）；
2. 「字」数据库将用来决定「文」数据库应该包含哪些条目。

# 附录：操作符

| 操作符 | 表达关系 |
| :--: | :--: |
| h | 左右 |
| z | 上下 |
| w | 左中右 |
| m | 中左右 |
| s | 左右中 |
| e | 上中下 |
| j | 右下包围 |
| l | 左下包围 |
| p | 左上包围 |
| q | 右上包围 |
| c | 向右包围 |
| d | 向右包围 |
| n | 向下包围 |
| u | 向上包围 |
| o | 全包围 |